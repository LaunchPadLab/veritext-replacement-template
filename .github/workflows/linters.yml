name: prettier / eslint

# This action works with pull requests and pushes
on: push

jobs:
  linters:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18.12.1'
          cache: 'yarn'
      - name: Install dependencies
        run: yarn setup:ci
      # - name: Install linters globally (Prettier, Eslint)
      #   run: yarn global add eslint prettier
      - name: Check for ugly files (Prettier)
        uses: creyD/prettier_action@v4.2
        with:
          # fail if there are ugly files
          dry: true
          prettier_options: --write **/*.{js,jsx,scss}
      - name: Run ESLint
        run: /home/runner/work/veritext-replacement-template/veritext-replacement-template/node_modules/.bin/eslint --fix --max-warnings=0 .
